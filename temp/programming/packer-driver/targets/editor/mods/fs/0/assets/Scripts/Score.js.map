{"version":3,"sources":["file:///D:/Craft-Monsters/Craft-Monsters/assets/Scripts/Score.ts"],"names":["_decorator","Component","find","director","Label","GameManager","ccclass","property","Score","start","_scoreLabel","update","dt","_distance","_scoreLabelPos","getPosition","_scorePos","node","direction","subtract","length","normalize","setPosition","add","multiplyScalar","scoreNum","Number","getComponent","string","slice","emit","State","SCORE_ADD","destroy"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA4BC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,K,OAAAA,K;;AACxDC,MAAAA,W,gBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;uBAGjBQ,K,WADZF,OAAO,CAAC,OAAD,C,yBAAR,MACaE,KADb,SAC2BP,SAD3B,CACqC;AAAA;AAAA;;AAAA,+CACL,IADK;;AAAA,kDAEF,IAFE;;AAAA,6CAGP,IAHO;;AAAA,6CAKL,GALK;AAAA;;AAQjCQ,QAAAA,KAAK,GAAI;AACL,eAAKC,WAAL,GAAmBR,IAAI,CAAC,gCAAD,CAAvB;AACH;;AAGDS,QAAAA,MAAM,CAACC,EAAD,EAAa;AACf,cAAI,KAAKC,SAAL,IAAkB,EAAtB,EAA0B;AAEtB,iBAAKC,cAAL,GAAsB,KAAKJ,WAAL,CAAiBK,WAAjB,EAAtB;AACA,iBAAKC,SAAL,GAAiB,KAAKC,IAAL,CAAUF,WAAV,EAAjB;;AAEA,gBAAIG,SAAe,GAAG,KAAKJ,cAAL,CAAoBK,QAApB,CAA6B,KAAKH,SAAlC,CAAtB;;AACA,iBAAKH,SAAL,GAAiBK,SAAS,CAACE,MAAV,EAAjB;AACAF,YAAAA,SAAS,CAACG,SAAV;AAEA,iBAAKJ,IAAL,CAAUK,WAAV,CAAsB,KAAKL,IAAL,CAAUF,WAAV,GAAwBQ,GAAxB,CAA4BL,SAAS,CAACM,cAAV,CAAyB,MAAMZ,EAA/B,CAA5B,CAAtB;AACH,WAVD,MAUO;AACH,gBAAIa,QAAgB,GAAGC,MAAM,CAAC,KAAKT,IAAL,CAAUU,YAAV,CAAuBvB,KAAvB,EAA+BwB,MAA/B,CAAsCC,KAAtC,CAA4C,CAA5C,CAAD,CAA7B,CADG,CAC2E;;AAC9E1B,YAAAA,QAAQ,CAAC2B,IAAT,CAAc;AAAA;AAAA,4CAAYC,KAAZ,CAAkBC,SAAhC,EAA2CP,QAA3C;AAEA,iBAAKR,IAAL,CAAUgB,OAAV;AACH;AAEJ;;AA/BgC,O","sourcesContent":["\r\nimport { _decorator, Component, Node, Vec3, log, find, director, Label } from 'cc';\r\nimport { GameManager } from './GameManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Score')\r\nexport class Score extends Component {\r\n    private _scoreLabel: Node = null!\r\n    private _scoreLabelPos: Vec3 = null!\r\n    private _scorePos: Vec3 = null!\r\n\r\n    private _distance: number = 100\r\n\r\n\r\n    start () {\r\n        this._scoreLabel = find('Canvas/UI/Score_UI/score_label')!\r\n    }\r\n\r\n\r\n    update(dt: number) {\r\n        if (this._distance >= 30) {\r\n\r\n            this._scoreLabelPos = this._scoreLabel.getPosition()\r\n            this._scorePos = this.node.getPosition()\r\n    \r\n            let direction: Vec3 = this._scoreLabelPos.subtract(this._scorePos)\r\n            this._distance = direction.length()\r\n            direction.normalize()\r\n\r\n            this.node.setPosition(this.node.getPosition().add(direction.multiplyScalar(650 * dt)))\r\n        } else {\r\n            let scoreNum: number = Number(this.node.getComponent(Label)!.string.slice(1)) // 获取分数\r\n            director.emit(GameManager.State.SCORE_ADD, scoreNum)\r\n\r\n            this.node.destroy()\r\n        }\r\n        \r\n    }\r\n}"]}