{"version":3,"sources":["file:///D:/Craft-Monsters/Craft-Monsters/assets/Scripts/MapNodes.ts"],"names":["_decorator","Component","find","instantiate","log","Prefab","resources","Vec3","ccclass","property","MapNodes","start","update","dt","_isAscend","pos","node","getPosition","y","setPosition","_timer","_loadEarthMap","x","z","load","err","prefab","earthMap","setParent"],"mappings":";;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,G,OAAAA,G;AAAKC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;;;;;;AACzEC,MAAAA,O,GAAsBR,U,CAAtBQ,O;AAASC,MAAAA,Q,GAAaT,U,CAAbS,Q;;0BAGJC,Q,WADZF,OAAO,CAAC,UAAD,C;;;;;;;;;;;;sEAEyB,I;;mEACJ,C;;;;;;;eAEzBG,K,GAAA,iBAAS,CAER,C;;eAGDC,M,GAAA,gBAAOC,EAAP,EAAmB;AACf,cAAI,KAAKC,SAAT,EAAoB;AAChB,gBAAIC,GAAS,GAAG,KAAKC,IAAL,CAAUC,WAAV,EAAhB;AACAF,YAAAA,GAAG,CAACG,CAAJ,IAAS,KAAKL,EAAd;AACA,iBAAKG,IAAL,CAAUG,WAAV,CAAsBJ,GAAtB;AAEA,iBAAKK,MAAL,IAAeP,EAAf;;AACA,gBAAI,KAAKO,MAAL,GAAc,GAAlB,EAAuB;AACnB,mBAAKC,aAAL,CAAmB,IAAId,IAAJ,CAASQ,GAAG,CAACO,CAAb,EAAgBP,GAAG,CAACG,CAAJ,GAAQ,EAAxB,EAA4BH,GAAG,CAACQ,CAAhC,CAAnB;;AACAnB,cAAAA,GAAG,CAAC,KAAD,CAAH;AACA,mBAAKgB,MAAL,GAAc,CAAd;AACH;AAEJ;AACJ,S;;eAGOC,a,GAAR,uBAAsBN,GAAtB,EAAiC;AAC7BT,UAAAA,SAAS,CAACkB,IAAV,CAAe,eAAf,EAAgCnB,MAAhC,EAAwC,UAACoB,GAAD,EAAWC,MAAX,EAA8B;AAClE,gBAAID,GAAJ,EAAS;AACLrB,cAAAA,GAAG,CAAC,KAAD,EAAQqB,GAAR,CAAH;AACA;AACH;;AAED,gBAAIE,QAAQ,GAAGxB,WAAW,CAACuB,MAAD,CAA1B;AACAC,YAAAA,QAAQ,CAACC,SAAT,CAAmB1B,IAAI,CAAC,iBAAD,CAAvB;AACAyB,YAAAA,QAAQ,CAACR,WAAT,CAAqBJ,GAArB;AAEH,WAVD;AAWH,S;;;QAtCyBd,S","sourcesContent":["\r\nimport { _decorator, Component, Node, find, instantiate, log, Prefab, resources, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapNodes')\r\nexport class MapNodes extends Component {\r\n    private _isAscend: boolean = true\r\n    private _timer: number = 0\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n\r\n    update(dt: number) {\r\n        if (this._isAscend) {\r\n            let pos: Vec3 = this.node.getPosition()\r\n            pos.y += 50 * dt\r\n            this.node.setPosition(pos)\r\n\r\n            this._timer += dt\r\n            if (this._timer > 991) {\r\n                this._loadEarthMap(new Vec3(pos.x, pos.y - 80, pos.z))\r\n                log('res')\r\n                this._timer = 0\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    private _loadEarthMap(pos: Vec3) {\r\n        resources.load('prefabs/Earth', Prefab, (err: any, prefab: Prefab) => {\r\n            if (err) {\r\n                log('err', err)\r\n                return\r\n            }\r\n\r\n            let earthMap = instantiate(prefab) as Node\r\n            earthMap.setParent(find('Canvas/MapNodes'))\r\n            earthMap.setPosition(pos)\r\n\r\n        })\r\n    }\r\n}"]}